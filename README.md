# REST-сервис для управления библиотекой книг

Этот проект представляет собой RESTful API, разработанный с использованием FastAPI, для управления каталогом книг. Сервис позволяет пользователям регистрироваться, добавлять книги в каталог, заимствовать и возвращать их, а также получать рекомендации популярных книг на основе количества заимствований.

---

## Содержание

1. [Описание проекта](#описание-проекта)
2. [Требования](#требования)
3. [Установка и запуск](#установка-и-запуск)
4. [Структура базы данных](#структура-базы-данных)
5. [API-эндпоинты](#api-эндпоинты)
6. [Тестирование](#тестирование)
7. [Качество кода](#качество-кода)
8. [Демонстрация работы](#демонстрация-работы)

---

## Описание проекта

Проект реализует следующие функции:
- Регистрация и аутентификация пользователей.
- CRUD-операции для управления каталогом книг.
- Функционал заимствования и возврата книг.
- Бизнес-логика для рекомендации популярных книг на основе количества заимствований.

---

## Требования

Для работы с проектом вам потребуется:
- Python 3.8+
- Установленные зависимости из файла `requirements.txt`
- SQLite.

---

## Установка и запуск

### 1. Клонирование репозитория
```
git clone https://github.com/your-repo/library-management.git
cd library-management
```

### 2. Установка зависимостей
```
pip install -r requirements.txt
```

### 3. Настройка базы данных
**SQLite**
База данных будет автоматически создана при первом запуске приложения.

### 4. Запуск приложения
```
uvicorn main:app --reload
```
Приложение будет доступно по адресу: http://localhost:8000.

### 5. Документация API
Swagger UI доступен по адресу: http://localhost:8000/docs.

---

## Структура базы данных

База данных состоит из трех таблиц:
**users**
Содержит информацию о пользователях.
Поля: id, username, password_hash.

**books**
Хранит данные о книгах в каталоге.
Поля: id, title, author, borrow_count.

**borrowed_books**
Отслеживает записи о заимствованиях книг.
Поля: id, user_id, book_id, borrowed_at, returned_at.

## API-эндпоинты
### Регистрация и аутентификация
* **POST** /register: Регистрация нового пользователя.
* **POST** /token: Получение токена доступа.

### CRUD для книг
* **POST** /books: Создание новой книги.
* **GET** /books: Получение списка книг.
* **PUT** /books/{book_id}: Обновление данных книги.
* **DELETE** /books/{book_id}: Удаление книги.

### Заимствование и возврат книг
* **POST** /borrow: Заимствование книги.
* **POST** /return: Возврат книги.

### Рекомендации
* **GET** /recommendations: Получение списка из 5 самых популярных книг.

---

## Тестирование
Для тестирования используется pytest с инструментом TestClient из FastAPI.

### Запуск тестов
```
pytest --cov=main test_main.py
```

Тесты покрывают все основные эндпоинты и проверяют корректность их работы.

---

## Качество кода
Для проверки качества кода используется pylint. Выполните команду:
```
pylint main.py > pylint.txt
```

Результаты проверки доступны в файле pylint.txt.

---

## Демонстрация работы
Демо-видео с презентацией проекта доступно по ссылке:
